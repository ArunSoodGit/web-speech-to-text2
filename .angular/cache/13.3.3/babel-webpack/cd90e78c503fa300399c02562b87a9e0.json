{"ast":null,"code":"// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license.\nimport { ArgumentNullError, ConnectionMessage } from \"../common/Exports\";\nimport { HeaderNames } from \"./HeaderNames\";\nexport class SpeechConnectionMessage extends ConnectionMessage {\n  constructor(messageType, path, requestId, contentType, body, streamId, additionalHeaders, id) {\n    if (!path) {\n      throw new ArgumentNullError(\"path\");\n    }\n\n    if (!requestId) {\n      throw new ArgumentNullError(\"requestId\");\n    }\n\n    const headers = {};\n    headers[HeaderNames.Path] = path;\n    headers[HeaderNames.RequestId] = requestId;\n    headers[HeaderNames.RequestTimestamp] = new Date().toISOString();\n\n    if (contentType) {\n      headers[HeaderNames.ContentType] = contentType;\n    }\n\n    if (streamId) {\n      headers[HeaderNames.RequestStreamId] = streamId;\n    }\n\n    if (additionalHeaders) {\n      for (const headerName in additionalHeaders) {\n        if (headerName) {\n          headers[headerName] = additionalHeaders[headerName];\n        }\n      }\n    }\n\n    if (id) {\n      super(messageType, body, headers, id);\n    } else {\n      super(messageType, body, headers);\n    }\n\n    this.privPath = path;\n    this.privRequestId = requestId;\n    this.privContentType = contentType;\n    this.privStreamId = streamId;\n    this.privAdditionalHeaders = additionalHeaders;\n  }\n\n  get path() {\n    return this.privPath;\n  }\n\n  get requestId() {\n    return this.privRequestId;\n  }\n\n  get contentType() {\n    return this.privContentType;\n  }\n\n  get streamId() {\n    return this.privStreamId;\n  }\n\n  get additionalHeaders() {\n    return this.privAdditionalHeaders;\n  }\n\n  static fromConnectionMessage(message) {\n    let path = null;\n    let requestId = null;\n    let contentType = null; // let requestTimestamp = null;\n\n    let streamId = null;\n    const additionalHeaders = {};\n\n    if (message.headers) {\n      for (const headerName in message.headers) {\n        if (headerName) {\n          if (headerName.toLowerCase() === HeaderNames.Path.toLowerCase()) {\n            path = message.headers[headerName];\n          } else if (headerName.toLowerCase() === HeaderNames.RequestId.toLowerCase()) {\n            requestId = message.headers[headerName]; // } else if (headerName.toLowerCase() === HeaderNames.RequestTimestamp.toLowerCase()) {\n            //  requestTimestamp = message.headers[headerName];\n          } else if (headerName.toLowerCase() === HeaderNames.ContentType.toLowerCase()) {\n            contentType = message.headers[headerName];\n          } else if (headerName.toLowerCase() === HeaderNames.RequestStreamId.toLowerCase()) {\n            streamId = message.headers[headerName];\n          } else {\n            additionalHeaders[headerName] = message.headers[headerName];\n          }\n        }\n      }\n    }\n\n    return new SpeechConnectionMessage(message.messageType, path, requestId, contentType, message.body, streamId, additionalHeaders, message.id);\n  }\n\n} //# sourceMappingURL=SpeechConnectionMessage.Internal.js.map","map":null,"metadata":{},"sourceType":"module"}